---
test_name: Create a ticket and get by identifier.

stages:
  - name: Create a ticket

    request:
      url: http://api-gateway:5566/tickets
      method: POST
      json:
        code: 2342dfad2342dfa23
        order: 1
        amount: 343

    response:
      status_code: 200
      json:
        - id: !anyint
          code: 2342dfad2342dfa23
          order: 1
          amount: 343
      save:
        json:
          ticket_id: "[0].id"


  - name: Get a Product

    request:
      url: "http://api-gateway:5566/tickets?ids={ticket_id:d}"
      method: GET

    response:
      status_code: 200
      json:
        - id: !int "{ticket_id:d}"
          version: 1
          code: 2342dfad2342dfa23
          order: 1
          amount: 343